{% extends "base.html" %}
{% block title %}Editar Usuario{% endblock %}
{% block page_title %}Editar Usuario{% endblock %}
{% block content %}
<div class="card">
    <div class="card-header">
        <h5>Editar Usuario: {{ usuario.username }}</h5>
    </div>
    <div class="card-body">
        <form method="POST">
            <div class="row">
                <div class="col-md-6 mb-3"><label for="username" class="form-label">Username *</label><input type="text"
                        class="form-control" id="username" name="username" value="{{ usuario.username }}" required>
                </div>
                <div class="col-md-6 mb-3"><label for="email" class="form-label">Email</label><input type="email"
                        class="form-control" id="email" name="email" value="{{ usuario.email }}"></div>
            </div>
            <div class="mb-3"><label for="password" class="form-label">Nueva Contrase√±a</label><input type="password"
                    class="form-control" id="password" name="password"><small class="text-muted">Dejar en blanco para
                    mantener la actual</small></div>
            <div class="mb-3"><label for="persona_id" class="form-label">Persona Asociada</label><select
                    class="form-select" id="persona_id" name="persona_id">
                    <option value="">Ninguna</option>{% for persona in personas %}<option value="{{ persona.id }}" {% if
                        usuario.persona_id==persona.id %}selected{% endif %}>{{ persona.nombre_completo }}</option>{%
                    endfor %}
                </select></div>
            <div class="row">
                <div class="col-md-6 mb-3"><label for="estudiante_id" class="form-label">Estudiante
                        Asociado</label><select class="form-select" id="estudiante_id" name="estudiante_id">
                        <option value="">Ninguno</option>{% for estudiante in estudiantes %}<option
                            value="{{ estudiante.id }}" {% if usuario.estudiante_id==estudiante.id %}selected{% endif
                            %}>{{ estudiante.persona.nombre_completo }}</option>{% endfor %}
                    </select></div>
                <div class="col-md-6 mb-3"><label for="docente_id" class="form-label">Docente Asociado</label><select
                        class="form-select" id="docente_id" name="docente_id">
                        <option value="">Ninguno</option>{% for docente in docentes %}<option value="{{ docente.id }}"
                            {% if usuario.docente_id==docente.id %}selected{% endif %}>{{
                            docente.persona.nombre_completo }}</option>{% endfor %}
                    </select></div>
            </div>
            <div class="mb-3"><label class="form-label">Roles *</label>
                <div class="border p-3 rounded">{% for rol in roles %}<div class="form-check"><input
                            class="form-check-input" type="checkbox" name="roles" value="{{ rol.id }}"
                            id="rol{{ rol.id }}" {% if rol in usuario.roles %}checked{% endif %}><label
                            class="form-check-label" for="rol{{ rol.id }}">{{ rol.nombre }}</label></div>{% endfor %}
                </div>
            </div>
            <div class="mb-3 form-check"><input type="checkbox" class="form-check-input" id="activo" name="activo" {% if
                    usuario.activo %}checked{% endif %}><label class="form-check-label" for="activo">Usuario
                    Activo</label></div>
            <div class="d-flex justify-content-between"><a href="{{ url_for('usuario.index') }}"
                    class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Cancelar</a><button type="submit"
                    class="btn btn-primary"><i class="bi bi-save"></i> Actualizar</button></div>
        </form>
    </div>
</div>
{% endblock %}